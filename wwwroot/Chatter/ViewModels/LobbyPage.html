<link rel="import" href="/sys/puppet-redirect/puppet-redirect.html" />
<link href="/Chatter/css/chatter.css" rel="stylesheet" />

<template>
    <template is="dom-bind">
        <h1 class="chatter-lobby-heading" slot="Chatter/header">Select or create chat room</h1>
        <input class="form-control" slot="Chatter/new-group-name" value="{{model.NewGroupName$::input}}" on-keyup="onInputKeyup" placeholder="Chat room name" />
        <button class="btn btn-primary" slot="Chatter/create-group" onmousedown="++this.value;" value="{{model.GoToNewGroup$::click}}">Create</button>

        <table class="chatter-lobby-table table table-bordered" slot="Chatter/groups">
            <thead>
                <tr>
                    <th>Name</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <template is="dom-repeat" items="{{model.ChatGroups}}">
                    <tr>
                        <td class="chatter-lobby-table__cell">
                            <span>{{item.Name}}</span>
                        </td>
                        <td>
                            <a href="{{item.Url}}" class="btn btn-primary btn-sm">Enter</a>
                            <button class="btn btn-sm btn-default" type="button" onclick="++this.value;" value="{{item.Delete$::click}}">Delete</button>
                        </td>
                    </tr>
                </template>
            </tbody>
        </table>

        <link is="puppet-redirect" slot="Chatter/redirect" history url$="{{model.RedirectUrl$}}" />
    </template>

    <template is="declarative-shadow-dom">
        <style>
            @import url("/Chatter/css/chatter.css");
        </style>

        <slot name="Chatter/header" />
        <div class="chatter-lobby-input">
            <slot name="Chatter/new-group-name" />
        </div>
        <div class="chatter-lobby-button">
            <slot name="Chatter/create-group" />
        </div>
        <slot name="Chatter/groups" />
        <slot name="Chatter/redirect" />
    </template>
    <script src="/Chatter/js/LobbyPageScript.js/"></script>
</template>
